#!/usr/bin/env zsh
# joopal-trim-whitespace (trim-whitespace)
#   trims leading and trailing whitespace from each line
#   works with stdin (pipes/redirects) and arguments

autoload -Uz echoer

function _trim-whitespace() {
    local v="$*"
    v="${v#"${v%%[![:space:]]*}"}"   # trim leading
    v="${v%"${v##*[![:space:]]}"}"   # trim trailing
    [[ -n "$v" ]] && printf '%s\n' "$v"
}

if [[ ! -t 0 ]]; then
    while IFS= read -r line; do
        _trim-whitespace "$line"
    done
elif [[ $# -gt 0 ]]; then
    local lines="$@"
    for line in "${(f)lines}"; do
        _trim-whitespace "$line"
    done
else
    echoer "ðŸš« ERROR: no args, no stdin ðŸš«"
    return 14
fi
